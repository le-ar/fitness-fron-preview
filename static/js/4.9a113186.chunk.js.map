{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","features/auth/error.ts","features/auth/usecases/authUseCase.ts","features/auth/AuthPage.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"],"names":["_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_inherits","subClass","superClass","TypeError","Object","create","constructor","value","writable","configurable","_typeof","obj","Symbol","iterator","_possibleConstructorReturn","self","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","result","Super","getPrototypeOf","NewTarget","this","arguments","apply","Parent","args","Class","a","push","instance","Function","bind","setPrototypeOf","_cache","Map","undefined","fn","indexOf","has","get","set","Wrapper","enumerable","ErrorWrongData","Error","AuthUseCase","settings","phone","password","roles","AuthPage","styled","props","useState","setPhone","setPassword","error","setError","userContext","useContext","UserContext","isAuthorizing","setAuthorizing","auth","useUseCaseCallback","user","to","onAuth","setUser","className","length","Alert","variant","Form","Group","controlId","Label","Control","onChange","target","type","size","placeholder","Button","onClick","disabled","Spinner","animation","_getPrototypeOf","o","__proto__","_setPrototypeOf","p"],"mappings":"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","file":"static/js/4.9a113186.chunk.js","sourcesContent":["export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeFunction from \"@babel/runtime/helpers/esm/isNativeFunction\";\nimport construct from \"@babel/runtime/helpers/esm/construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export class ErrorWrongData extends Error {}\n","import { UseCaseSettings } from '../../../core/usecase';\nimport { User } from '../../user/models/user';\n\nexport async function AuthUseCase(\n    settings: UseCaseSettings,\n    phone: string,\n    password: string\n): Promise<User> {\n    // await sleep(1000);\n    // throw new Error();\n    // throw new ErrorWrongData();\n    return {\n        roles: ['admin', 'master', 'user'],\n    };\n}\n","import { useContext, useState } from 'react';\nimport Alert from 'react-bootstrap/esm/Alert';\nimport Form from 'react-bootstrap/esm/Form';\nimport Spinner from 'react-bootstrap/esm/Spinner';\nimport { Redirect } from 'react-router';\nimport styled from 'styled-components';\nimport { useUseCaseCallback } from '../../core/usecase';\nimport Button from '../button/Button';\nimport { UserContext } from '../user/userContext';\nimport { ErrorWrongData } from './error';\nimport { AuthUseCase } from './usecases/authUseCase';\n\ninterface AuthPageProps {\n    className?: string;\n}\n\nfunction AuthPageComp(props: AuthPageProps) {\n    const [phone, setPhone] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n\n    const userContext = useContext(UserContext);\n\n    const [isAuthorizing, setAuthorizing] = useState(false);\n\n    const auth = useUseCaseCallback(AuthUseCase);\n\n    if (userContext?.user != null) {\n        return <Redirect to=\"/menu\" />;\n    }\n\n    const onAuth = async () => {\n        setAuthorizing(true);\n        setError('');\n        try {\n            const user = await auth(phone, password);\n            userContext?.setUser(user);\n        } catch (e) {\n            if (e instanceof ErrorWrongData) {\n                setError('Неверный телефон или пароль');\n            } else {\n                setError('Произошла ошибка. Попробуйте позднее');\n            }\n        }\n        setAuthorizing(false);\n    };\n\n    return (\n        <div className={props.className}>\n            <h4>Авторизация</h4>\n            {error.length > 0 && <Alert variant=\"danger\">{error}</Alert>}\n            <Form.Group className=\"mb-3\" controlId=\"formBasicPhone\">\n                <Form.Label>Телефон</Form.Label>\n                <Form.Control\n                    value={phone}\n                    onChange={(e) => setPhone(e.target.value)}\n                    type=\"phone\"\n                    size=\"sm\"\n                    placeholder=\"Введите телефон\"\n                />\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n                <Form.Label>Пароль</Form.Label>\n                <Form.Control\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    size=\"sm\"\n                    type=\"password\"\n                    placeholder=\"Введите пароль\"\n                />\n            </Form.Group>\n            <Button\n                onClick={onAuth}\n                disabled={isAuthorizing || userContext == null}\n            >\n                {(isAuthorizing || userContext == null) && (\n                    <span>\n                        <Spinner size=\"sm\" animation=\"grow\" />\n                        &nbsp;\n                    </span>\n                )}\n                Войти\n            </Button>\n        </div>\n    );\n}\n\nconst AuthPage = styled(AuthPageComp)`\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n`;\n\nexport default AuthPage;\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}"],"sourceRoot":""}